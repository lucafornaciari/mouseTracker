!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("mouseTracker",[],t):"object"==typeof exports?exports.mouseTracker=t():e.mouseTracker=t()}(this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return e[r].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(){function e(){n(this,e)}return r(e,[{key:"createPage",value:function(e){var t=new s(e);return t}},{key:"createAnalysisWrapper",value:function(e,t){var n=new c(e,t);return n}},{key:"getMouseEvents",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length,r=Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return e.sendAllRegisteredData(t,r)}},{key:"getMouseMovementEvents",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length,r=Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return e.sendRegisteredMouseMovement(t,r)}},{key:"getMouseClickEvents",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length,r=Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return e.sendRegisteredClick(t,r)}},{key:"addListener",value:function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];n.forEach(function(t){switch(t){case"click":e.addClickListener();break;case"mouseMovement":e.addMouseMoveListener();break;default:console.error("listener "+t+" is not available")}})}},{key:"addAllListeners",value:function(e){e.addClickListener(),e.addMouseMoveListener()}}]),e}();t["default"]=i;var a=function(){function e(){n(this,e)}return r(e,null,[{key:"findElementSelected",value:function(t,n){for(var r=e.searchPathElementDistance(n),i=e.searchPathElementContainerDistance(n,t),a=null,s=r;s<i;s++)if(void 0!==n.path[s].attributes.mouseTracker){a=n.path[s];break}return null===a?t:a}},{key:"searchPathElementDistance",value:function(t){var n=t.toElement.attributes.mouseTracker;void 0===t.toElement.attributes.mouseTracker&&(n=e.searchFirtFatherAnalyticsTag(t));for(var r=0;r<t.path.length;r++)if(void 0!==t.path[r].attributes.mouseTracker&&t.path[r].attributes.mouseTracker===n)return r;return-1}},{key:"searchPathElementContainerDistance",value:function(e,t){for(var n=0;n<e.path.length;n++)if(e.path[n].id===t.id)return n;return-1}},{key:"searchFirtFatherAnalyticsTag",value:function(e){for(var t=void 0,n=e,r=!1;!r;)void 0!==n.toElement.parentNode.attributes.mouseTracker?(t=n.toElement.parentNode.attributes.mouseTracker,r=!0):n=n.toElement.parentNode;return t}},{key:"containerIsInWrapperList",value:function(e,t){for(var n=0;n<t.length;n++)if(t[n].name===e)return!0;return!1}},{key:"getBrowser",value:function(){return(navigator.userAgent.indexOf("Opera")||navigator.userAgent.indexOf("OPR"))!==-1?"Opera":navigator.userAgent.indexOf("Chrome")!==-1?"Chrome":navigator.userAgent.indexOf("Safari")!==-1?"Safari":navigator.userAgent.indexOf("Firefox")!==-1?"Firefox":navigator.userAgent.indexOf("MSIE")!==-1||1==!!document.documentMode?"IE":"unknown"}}]),e}(),s=function(){function e(t){n(this,e),this.name=t,this.width=window.innerWidth,this.height=window.innerHeight,this.browser=a.getBrowser(),this.containers=[]}return r(e,[{key:"setHeight",value:function(e){this.height=e}},{key:"setWidth",value:function(e){this.width=e}},{key:"addContainer",value:function(e){this.containers.push(e)}},{key:"sendAllRegisteredData",value:function(e,t){var n=m.sendJsonAllData(this.containers,t);return e||this.emptyContainersTracementList(t),n}},{key:"sendRegisteredClick",value:function(e,t){var n=m.sendJsonClickData(this.containers,t);return e||this.emptyClickContainers(t),n}},{key:"sendRegisteredMouseMovement",value:function(e,t){var n=m.sendJsonMouseMovementsData(this.containers,t);return e||this.emptyMouseMovementContainers(t),n}},{key:"emptyContainersTracementList",value:function(e){this.containers.forEach(function(t){(a.containerIsInWrapperList(t.name,e)||0==e.length)&&(t.clickListener.clearList(),t.mouseMovementListener.clearList())})}},{key:"emptyClickContainers",value:function(e){this.containers.forEach(function(t){(a.containerIsInWrapperList(t.name,e)||0==e.length)&&t.clickListener.clearList()})}},{key:"emptyMouseMovementContainers",value:function(e){this.containers.forEach(function(t){(a.containerIsInWrapperList(t.name,e)||0==e.length)&&t.mouseMovementListener.clearList()})}}]),e}(),o=function(){function e(t){var r=this;n(this,e),this.clickList=[],this.wrapper=t,this.wrapper.element.addEventListener("click",function(e){return r.registerClick(e)})}return r(e,[{key:"registerClick",value:function(e){this.wrapper.page.setHeight(window.innerHeight),this.wrapper.page.setWidth(window.innerWidth);var t=new l(this.wrapper,e);this.clickList.push(t)}},{key:"clearList",value:function(){this.clickList.length=0}},{key:"getClickList",value:function(){return this.clickList}}]),e}(),u=function(){function e(t){n(this,e),this.movements=[],this.wrapper=t,this.addListener()}return r(e,[{key:"addListener",value:function(){this.mouseIsOver=!1;var e=this;this.wrapper.element.onmouseover=function(){e.mouseIsOver=!0},this.wrapper.element.onmouseout=function(){e.mouseIsOver=!1},this.wrapper.element.addEventListener("mousemove",function(e){window.mouseX=e.clientX,window.mouseY=e.clientY}),window.setInterval(function(t){e.mouseIsOver&&e.registerMouseMovement(t)},500)}},{key:"registerMouseMovement",value:function(e){this.wrapper.page.setHeight(window.innerHeight),this.wrapper.page.setWidth(window.innerWidth);var t=new h(this.wrapper,window.mouseX,window.mouseY);this.movements.push(t)}},{key:"clearList",value:function(){this.movements.length=0}},{key:"getList",value:function(){return this.movements}}]),e}(),c=function(){function e(t,r){n(this,e),this.page=t,this.name=r,this.element=document.getElementById(r),this.page.addContainer(this)}return r(e,[{key:"addClickListener",value:function(){this.clickListener=new o(this)}},{key:"addMouseMoveListener",value:function(){this.mouseMovementListener=new u(this)}}]),e}(),l=function(){function e(t,r){n(this,e),this.wrapperElement=t,this.dateTime=Date.now(),this.x=r.x+window.pageXOffset,this.y=r.y+window.pageYOffset,this.selectedElement=a.findElementSelected(this.wrapperElement.element,r),this.nameSelectedElement=this.selectedElement.attributes.mouseTracker.nodeValue}return r(e,[{key:"showInfo",value:function(){var e="Page "+this.wrapperElement.page.name+" [width:"+this.wrapperElement.page.width+", height: "+this.wrapperElement.page.height+"] \n Container: "+this.wrapperElement.name+" \n ### "+this.dateTime+" - (x: "+this.x+" y:"+this.y+") ------ "+this.nameSelectedElement;console.log(e)}}]),e}(),h=function(){function e(t,r,i){n(this,e),this.wrapperElement=t,this.dateTime=Date.now(),this.x=r+window.pageXOffset,this.y=i+window.pageYOffset}return r(e,[{key:"showInfo",value:function(){var e="Page "+this.wrapperElement.page.name+" "+this.wrapperElement.name+" ### "+this.dateTime+" - x: "+this.x+" y:"+this.y;console.log(e)}}]),e}(),m=function(){function e(){n(this,e)}return r(e,null,[{key:"sendJsonAllData",value:function(e,t){var n=p.createClickObjectToSend(e,t),r=p.createMouseMovementObjectToSend(e,t);return JSON.stringify(n.concat(r))}},{key:"sendJsonClickData",value:function(e,t){var n=p.createClickObjectToSend(e,t);return JSON.stringify(n)}},{key:"sendJsonMouseMovementsData",value:function(e,t){var n=p.createMouseMovementObjectToSend(e,t);return JSON.stringify(n)}}]),e}(),p=function(){function e(){n(this,e)}return r(e,null,[{key:"createMouseMovementObjectToSend",value:function(e,t){var n=[];return e.forEach(function(e){(a.containerIsInWrapperList(e.name,t)||0==t.length)&&e.mouseMovementListener.getList().forEach(function(e){var t={type:"move",dateTime:e.dateTime,x:e.x,y:e.y,wrapperName:e.wrapperElement.name,browser:e.wrapperElement.page.browser,namePage:e.wrapperElement.page.name,heightPage:e.wrapperElement.page.height,widthPage:e.wrapperElement.page.width};n.push(t)})}),n}},{key:"createClickObjectToSend",value:function(e,t){var n=[];return e.forEach(function(e){(a.containerIsInWrapperList(e.name,t)||0==t.length)&&e.clickListener.getClickList().forEach(function(e){var t={type:"click",dateTime:e.dateTime,nameSelectedElement:e.nameSelectedElement,x:e.x,y:e.y,wrapperName:e.wrapperElement.name,browser:e.wrapperElement.page.browser,namePage:e.wrapperElement.page.name,heightPage:e.wrapperElement.page.height,widthPage:e.wrapperElement.page.width};n.push(t)})}),n}}]),e}();e.exports=t["default"]}])});
//# sourceMappingURL=mouseTracker.min.js.map